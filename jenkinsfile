pipeline {
  agent any
  parameters {
    // string(name:'name_container', defaultValue: 'gestorrecursos-frontend', description: 'nombre del container')
    // string(name:'name_imagen', defaultValue: 'pygestorrecursos_frontend', description: 'nombre del container')
    // string(name:'tag_imagen', defaultValue: 'latest', description: 'nombre del container')
    // string(name:'puerto_imagen', defaultValue: '3500', description: 'nombre del container')
  }
  stages {
    stage('Copiando archivo .env') {
      sh 'cp /home/scm/gestorRecursos/frontend/.env /.env'
    }
    stage('Levantando contenedor de desarrollo y generando carpeta dist') {
      sh '''
      docker build /containers/development -t pygestorrecursos-spa:dev
      docker exec -dp 3500:3000 --name pygestorrecursos-spa-dev-jenkins -v .:/app pygestorrecursos-spa:dev  yarn build
      docker rm pygestorrecursos-spa-dev-jenkins
      docker rm pygestorrecursos-spa:dev
      '''
    }
    stage('Generando imagen para producci√≥n'){
      sh 'cp /home/scm/gestorRecursos/frontend/DockerFile /Dockerfile'
      sh '''
      docker build . -t pygestorrecursos-spa:production
      '''
    }
  }
}